{% extends "base.html" %}

{% block title %}Dashboard - MoneyTrack{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block breadcrumb %}
<div class="breadcrumb-item">
    <i class="fas fa-home"></i>
    <span>Dashboard</span>
</div>
{% endblock %}

{% block content %}
<!-- Quick Stats Overview -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 mb-5">
    <!-- Total Balance Card -->
    <div class="card" data-aos="fade-up" data-aos-delay="100">
        <div class="card-body">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">
                        Total Balance
                    </div>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--primary-color);">
                        GH$12,245.41
                    </div>
                    <div style="color: var(--success-color); font-size: 0.875rem; margin-top: 0.5rem;">
                        <i class="fas fa-arrow-up"></i> +2.5% from last month
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); 
                            color: white; padding: 1rem; border-radius: 50%; width: 60px; height: 60px; 
                            display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-wallet" style="font-size: 1.5rem;"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Monthly Budget Card -->
    <div class="card" data-aos="fade-up" data-aos-delay="200">
        <div class="card-body">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">
                        Monthly Budget
                    </div>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--warning-color);">
                        GH$5,512.22
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">
                        84% utilized
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, var(--warning-color), #ea580c); 
                            color: white; padding: 1rem; border-radius: 50%; width: 60px; height: 60px; 
                            display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-chart-pie" style="font-size: 1.5rem;"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- This Month Expenses -->
    <div class="card" data-aos="fade-up" data-aos-delay="300">
        <div class="card-body">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">
                        This Month
                    </div>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--danger-color);">
                        GH$3,247.89
                    </div>
                    <div style="color: var(--danger-color); font-size: 0.875rem; margin-top: 0.5rem;">
                        <i class="fas fa-arrow-up"></i> +12% from last month
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, var(--danger-color), #dc2626); 
                            color: white; padding: 1rem; border-radius: 50%; width: 60px; height: 60px; 
                            display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-credit-card" style="font-size: 1.5rem;"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Savings Goal -->
    <div class="card" data-aos="fade-up" data-aos-delay="400">
        <div class="card-body">
            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                <div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">
                        Savings Goal
                    </div>
                    <div style="font-size: 2rem; font-weight: 700; color: var(--success-color);">
                        68%
                    </div>
                    <div style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">
                        GH$6,800 of GH$10,000
                    </div>
                </div>
                <div style="background: linear-gradient(135deg, var(--success-color), #16a34a); 
                            color: white; padding: 1rem; border-radius: 50%; width: 60px; height: 60px; 
                            display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-piggy-bank" style="font-size: 1.5rem;"></i>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Dashboard Content -->
<div class="grid grid-cols-1 lg:grid-cols-3">
    <!-- Cards and Balance Section -->
    <div class="lg:col-span-1">
        <!-- Payment Cards -->
        <div class="card mb-5" data-aos="fade-up" data-aos-delay="500">
            <div class="card-header">
                <h3 class="card-title">ðŸ’³ Payment Cards</h3>
                <p class="card-subtitle">Your connected accounts</p>
            </div>
            <div class="card-body">
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- Debit Card -->
                    <div style="background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); 
                                color: white; padding: 1.5rem; border-radius: var(--radius-xl); position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; 
                                    background: rgba(255,255,255,0.1); border-radius: 50%; transform: translate(30px, -30px);"></div>
                        <div style="position: relative; z-index: 1;">
                            <div style="font-size: 0.875rem; opacity: 0.8; margin-bottom: 0.5rem;">Debit Card</div>
                            <div style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">GH$1,131.79</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 9131</div>
                        </div>
                    </div>

                    <!-- Credit Card -->
                    <div style="background: linear-gradient(135deg, var(--success-color), #16a34a); 
                                color: white; padding: 1.5rem; border-radius: var(--radius-xl); position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; 
                                    background: rgba(255,255,255,0.1); border-radius: 50%; transform: translate(30px, -30px);"></div>
                        <div style="position: relative; z-index: 1;">
                            <div style="font-size: 0.875rem; opacity: 0.8; margin-bottom: 0.5rem;">Credit Card</div>
                            <div style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">GH$241.22</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 1144</div>
                        </div>
                    </div>

                    <!-- Savings Account -->
                    <div style="background: linear-gradient(135deg, var(--warning-color), #ea580c); 
                                color: white; padding: 1.5rem; border-radius: var(--radius-xl); position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; 
                                    background: rgba(255,255,255,0.1); border-radius: 50%; transform: translate(30px, -30px);"></div>
                        <div style="position: relative; z-index: 1;">
                            <div style="font-size: 0.875rem; opacity: 0.8; margin-bottom: 0.5rem;">Savings Account</div>
                            <div style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem;">GH$13.56</div>
                            <div style="font-size: 0.875rem; opacity: 0.8;">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 2376</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Budget Chart Section -->
    <div class="lg:col-span-1">
        <div class="card mb-5" data-aos="fade-up" data-aos-delay="600">
            <div class="card-header">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 class="card-title">ðŸ“Š Budget Overview</h3>
                        <p class="card-subtitle">Monthly spending trends</p>
                    </div>
                    <select class="form-control form-select" style="width: auto;">
                        <option>Monthly</option>
                        <option>Weekly</option>
                        <option>Yearly</option>
                    </select>
                </div>
            </div>
            <div class="card-body">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary-color);">GH$5,512.22</div>
                    <div style="color: var(--text-secondary);">Current month budget</div>
                </div>
                <canvas id="budgetChart" style="height: 200px;"></canvas>
            </div>
        </div>

        <!-- Budget Categories Progress -->
        <div class="card" data-aos="fade-up" data-aos-delay="700">
            <div class="card-header">
                <h3 class="card-title">ðŸŽ¯ Category Progress</h3>
                <p class="card-subtitle">Budget utilization by category</p>
            </div>
            <div class="card-body">
                <div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 2rem;">
                    <div style="position: relative; width: 120px; height: 120px;">
                        <svg viewBox="0 0 100 100" style="width: 100%; height: 100%; transform: rotate(-90deg);">
                            <circle cx="50" cy="50" r="45" fill="none" stroke="var(--gray-200)" stroke-width="8"></circle>
                            <circle cx="50" cy="50" r="45" fill="none" stroke="var(--primary-color)" stroke-width="8" 
                                    stroke-dasharray="282.7" stroke-dashoffset="45.2" stroke-linecap="round"></circle>
                        </svg>
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 700; color: var(--text-primary);">84%</div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary);">utilized</div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; 
                                background-color: var(--primary-color); color: white; border-radius: 20px; font-size: 0.875rem;">
                        <i class="fas fa-home"></i>
                        <span>Rent</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; 
                                background-color: var(--gray-200); color: var(--text-primary); border-radius: 20px; font-size: 0.875rem;">
                        <i class="fas fa-utensils"></i>
                        <span>Food</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; 
                                background-color: var(--gray-200); color: var(--text-primary); border-radius: 20px; font-size: 0.875rem;">
                        <i class="fas fa-gift"></i>
                        <span>Gifts</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Transactions Section -->
    <div class="lg:col-span-1">
        <div class="card" data-aos="fade-up" data-aos-delay="800">
            <div class="card-header">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h3 class="card-title">ðŸ’¸ Recent Transactions</h3>
                        <p class="card-subtitle">Latest expense entries</p>
                    </div>
                    <a href="/display" class="btn btn-secondary btn-sm">View All</a>
                </div>
            </div>
            <div class="card-body">
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <!-- Transaction Item -->
                    <div style="display: flex; justify-content: space-between; align-items: center; 
                                padding: 1rem; background-color: var(--bg-secondary); border-radius: var(--radius-lg);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 48px; height: 48px; border-radius: 50%; 
                                        background: linear-gradient(135deg, #ea4c89, #f082ac); 
                                        display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fab fa-dribbble"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary);">Dribbble</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">8 July Â· 11:15 AM</div>
                            </div>
                        </div>
                        <div style="font-weight: 600; color: var(--danger-color);">-GH$10.67</div>
                    </div>

                    <!-- Transaction Item -->
                    <div style="display: flex; justify-content: space-between; align-items: center; 
                                padding: 1rem; background-color: var(--bg-secondary); border-radius: var(--radius-lg);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 48px; height: 48px; border-radius: 50%; 
                                        background: linear-gradient(135deg, #e50914, #f40612); 
                                        display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                                N
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary);">Netflix</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">7 July Â· 7:50 PM</div>
                            </div>
                        </div>
                        <div style="font-weight: 600; color: var(--danger-color);">-GH$12.01</div>
                    </div>

                    <!-- Transaction Item -->
                    <div style="display: flex; justify-content: space-between; align-items: center; 
                                padding: 1rem; background-color: var(--bg-secondary); border-radius: var(--radius-lg);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 48px; height: 48px; border-radius: 50%; 
                                        background: linear-gradient(135deg, #ff5a5f, #ff7e82); 
                                        display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-home"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary);">Airbnb</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">5 July Â· 11:17 AM</div>
                            </div>
                        </div>
                        <div style="font-weight: 600; color: var(--danger-color);">-GH$112.43</div>
                    </div>

                    <!-- Transaction Item -->
                    <div style="display: flex; justify-content: space-between; align-items: center; 
                                padding: 1rem; background-color: var(--bg-secondary); border-radius: var(--radius-lg);">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 48px; height: 48px; border-radius: 50%; 
                                        background: linear-gradient(135deg, #1da1f2, #0d8bd9); 
                                        display: flex; align-items: center; justify-content: center; color: white; font-weight: 700;">
                                X
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary);">X Subscribe</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">5 July Â· 09:35 AM</div>
                            </div>
                        </div>
                        <div style="font-weight: 600; color: var(--danger-color);">-GH$16.00</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div style="margin-top: 2rem; display: flex; gap: 0.5rem;">
                    <a href="/add" class="btn btn-primary" style="flex: 1;">
                        <i class="fas fa-plus"></i>
                        Add Expense
                    </a>
                    <a href="/month" class="btn btn-secondary">
                        <i class="fas fa-chart-bar"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Budget Chart
    const ctx = document.getElementById('budgetChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['18 Dec', '25 Dec', '1 Jan', '8 Jan', '15 Jan', '22 Jan', '29 Jan'],
            datasets: [{
                label: 'Budget',
                data: [4200, 4800, 5200, 4900, 5500, 5800, 5512],
                borderColor: 'rgb(99, 102, 241)',
                backgroundColor: 'rgba(99, 102, 241, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: 'rgb(99, 102, 241)',
                pointBorderColor: 'white',
                pointBorderWidth: 2,
                pointRadius: 6
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: false,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.05)'
                    },
                    ticks: {
                        callback: function(value) {
                            return 'GH$' + value.toLocaleString();
                        }
                    }
                },
                x: {
                    grid: {
                        display: false
                    }
                }
            },
            interaction: {
                intersect: false,
                mode: 'index'
            }
        }
    });
</script>
{% endblock %}
